<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder / Survey</title>
    <link rel="icon" href="images/users.png">
    <!-- Link to Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
    <!-- Link to Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
        crossorigin="anonymous">
    <!-- Link to the jQuery Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Link to Bootstrap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <!-- Firebase Reference -->
    <link href="css/style.css" type="text/css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <br>
        <h2>Survey Questions</h2>
        <hr>
        <h3>About You</h3>
        <form>
            <div class="form-group">
                <label for="exampleInputEmail1">Name (Required)</label>
                <input type="name" class="form-control validate" id="name" aria-describedby="name">
            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Link to Photo Image (Required)</label>
                <input type="photoLink" class="form-control validate" id="photoLink">
            </div>
            <hr>
        </form>
        <h3>Question 1</h3>
        <div class="form-group">
            <label for="q1">Your mind is always buzzing with unexplored ideas and plans.</label>
            <select class="form-control questions" id="q1">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 2</h3>
        <div class="form-group">
            <label for="q2">Generally speaking, you rely more on your experience than your imagination.</label>
            <select class="form-control questions" id="q2">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 3</h3>
        <div class="form-group">
            <label for="q3">You find it easy to stay relaxed and focused even when there is some pressure.
            </label>
            <select class="form-control questions" id="q3">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 4</h3>
        <div class="form-group">
            <label for="q4">You rarely do something just out of sheer curiosity.
            </label>
            <select class="form-control questions" id="q4">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 5</h3>
        <div class="form-group">
            <label for="q5">People can rarely upset you.</label>
            <select class="form-control questions" id="q5">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 6</h3>
        <div class="form-group">
            <label for="q6">It is often difficult for you to relate to other people’s feelings.</label>
            <select class="form-control questions" id="q6">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 7</h3>
        <div class="form-group">
            <label for="q7">In a discussion, truth should be more important than people’s sensitivities.</label>
            <select class="form-control questions" id="q7">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 8</h3>
        <div class="form-group">
            <label for="q8">You rarely get carried away by fantasies and ideas.</label>
            <select class="form-control questions" id="q8">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 9</h3>
        <div class="form-group">
            <label for="q9">You think that everyone’s views should be respected regardless of whether they are
                supported by facts or not.
            </label>
            <select class="form-control questions" id="q9">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <h3>Question 10</h3>
        <div class="form-group">
            <label for="q10">You feel more energetic after spending time with a group of people.</label>
            <select class="form-control questions" id="q10">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <p></p>
        <button type="button" id="submit-button" class="btn btn-primary btn-lg btn-block"><i class="fas fa-check-circle"></i>
            Submit</button>
        <hr>

        <footer class="footer">
            <p id="divider"><a href="/api/friends">API Friends List</a> | <a href="#">GitHub Repo</a></p>
        </footer>

        <!-- MODAL -->
        <!-- Button trigger modal -->
        <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#resultsModal">
            Launch demo modal
        </button> -->

        <!-- Modal -->
        <div class="modal fade" id="resultsModal" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel"><strong>Best Match</strong></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchName"></h2>
                        <img id="matchPhoto" src="" alt="">
                        <!-- <img id="matchPhoto" src="https://talenthouse-res.cloudinary.com/image/upload/b_rgb:F7F7F7,c_fill,d_profilepic_placeholder_2x.png,f_auto,h_360,w_360/v1/user-331248/profilePicture/muizrn2pnxhs7ojbwdnm.jpg"
                            alt=""> -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="modal-button" data-dismiss="modal">Close</button>
                        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        // $(document).ready(function() {

        // Activate submit button
        $('#submit-button').on('click', function (event) {
            // var newFriendScores = [];
            // alert("clicked!");
            event.preventDefault();
            // function formValidation() {
            // var validInput = true;
            // alert("Submit Button Clicked!");

            // if($("#name" ==="")) {
            //     alert("No blanks");
            //     // validInput = false;
            // }
            // var validInput = true;
            // $(".form-control").each(function() {
            //     if ($(this).val() === "") {
            //         validInput = false;
            //     }
            // });
            // $(".dropdown-item").each(function() {
            //     if ($(this).val() === "") {
            //         validInput = false;
            //     }
            // });
            // return validInput;
            // }

            // Form validation
            var validInput = true;

            if ($("#name").val() === "" || $("#photoLink").val() === "") {
                validInput = false;
                // alert("Please complete the About You section");
            } else if ($("#q1").val() === "empty" || $("#q2").val() === "empty" || $("#q3").val() === "empty"
                || $("#q4").val() === "empty" || $("#q5").val() === "empty" || $("#q6").val() === "empty"
                || $("#q7").val() === "empty" || $("#q8").val() === "empty" || $("#q9").val() === "empty" || $("#q10").val() === "empty") {
                validInput = false;
                // alert("Please answer all the questions");
            }

            if (validInput === true) {
                // if (formValidation()) {
                    
                // Collect user inputs
                var userInput = {
                    name: $("#name").val().trim(),
                    photo: $("#photoLink").val().trim(),
                    scores: [
                        $("#q1").val(),
                        $("#q2").val(),
                        $("#q3").val(),
                        $("#q4").val(),
                        $("#q5").val(),
                        $("#q6").val(),
                        $("#q7").val(),
                        $("#q8").val(),
                        $("#q9").val(),
                        $("#q10").val()
                    ]
                    // console.log(newFriend);
                };

                // console.log("USER INPUT: " + userInput);

                // console.log(newFriendScores);

                // $.post('/api/friends', userInput)

                // $.post("/api/friends", userInput,
                //     function (data) {

                // Clear the form when submitting
                $("#name").val("");
                $("#photoLink").val("");
                $("#q1").val("");
                $("#q2").val("");
                $("#q3").val("");
                $("#q4").val("");
                $("#q5").val("");
                $("#q6").val("");
                $("#q7").val("");
                $("#q8").val("");
                $("#q9").val("");
                $("#q10").val("");
                //     });

                var currentURL = window.location.origin;

                // Ajax call for receiving response after POST request
                $.post(currentURL + "/api/friends", userInput, function (data) {
                    $("#matchName").text(data.name);
                    $("#matchPhoto").attr("src", data.photoLink);
                    $("#resultsModal").modal("toggle");
                    alert("WORKING!");
                    console.log("DATA   NAME: " + data.name);
                    console.log("DATA   PHOTO: " + data.photo);
                });
            } else {
                // If a required field is missing, show alert
                alert("Please fill out all of the fields before submitting survey!");
            }
        });


    </script>



    <!-- </div> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <!-- <script src="assets/javascript/app.js" type="text/javascript"></script> -->

</body>

</html>